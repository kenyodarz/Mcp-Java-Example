# Arquitectura del Sistema

Esta p√°gina describe la arquitectura t√©cnica de **{{PROJECT_NAME}}**. Su objetivo es dar una visi√≥n clara de c√≥mo est√° construido el sistema y por qu√© se tomaron ciertas decisiones.

## üèóÔ∏è Diagrama de Componentes (C4 Nivel 2)

> **üìù Instrucci√≥n**: Inserta aqu√≠ un diagrama que muestre c√≥mo interact√∫a este servidor MCP con otros sistemas (ej. Claude Desktop, APIs bancarias, base de datos).
>
> Puedes usar Mermaid para esto. Reemplaza el ejemplo de abajo con tu diagrama real.

```mermaid
graph TD
    User[Usuario (Claude/Cursor)] -->|HTTP/SSE| MCP[MCP Server]
    MCP -->|JPA| DB[(Base de Datos)]
    MCP -->|REST| ExtAPI[API Externa]
```

### Descripci√≥n de Componentes

| Componente | Responsabilidad | Tecnolog√≠a |
|------------|-----------------|------------|
| **MCP Server** | Provee herramientas de IA | Spring AI / {{FRAMEWORK}} |
| **Base de Datos** | Persistencia de datos | PostgreSQL / H2 |
| **Cliente** | Consume el servidor MCP | Claude Desktop / Cursor |

---

## üèõÔ∏è Estructura del C√≥digo (Clean Architecture)

Este proyecto sigue **Clean Architecture** para mantener el c√≥digo desacoplado y testearle.

- **üìÇ domain**: Reglas de negocio puras. No depende de frameworks.
  - *Modelos, Puertos (Interfaces), Casos de Uso*.
- **üìÇ application**: Orquestaci√≥n. Implementa los casos de uso.
- **üìÇ infrastructure**: Detalles t√©cnicos.
  - *Controladores REST, Repositorios JPA, Clientes HTTP*.
- **üìÇ boot**: Configuraci√≥n de arranque de Spring Boot.

> **üìù Para Dummies**:
> - Si cambias la base de datos, solo tocas `infrastructure`.
> - Si cambias una regla de negocio (ej. "usuario debe ser mayor de edad"), tocas `domain`.
> - Si agregas un nuevo endpoint, tocas `infrastructure` (controller).

---

## üß† Decisiones de Dise√±o (ADRs)

> **üìù Instrucci√≥n**: Documenta aqu√≠ las decisiones t√©cnicas importantes que hayas tomado.

### ADR-001: Uso de Spring AI MCP
- **Contexto**: Necesit√°bamos una forma est√°ndar de exponer herramientas a LLMs.
- **Decisi√≥n**: Usar Spring AI por su integraci√≥n nativa con el ecosistema Java del banco.
- **Consecuencias**: Facilita la inyecci√≥n de dependencias y configuraci√≥n.

---

## üîÑ Flujo de Datos

1. **Request**: El usuario pide "Consultar saldo" en Claude.
2. **Controller**: `McpController` recibe la petici√≥n.
3. **Uses Case**: `GetBalanceUseCase` ejecuta la l√≥gica.
4. **Repository**: `AccountRepository` consulta la BD.
5. **Response**: Se devuelve el texto a Claude.
